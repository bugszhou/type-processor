{"version":3,"file":"type-processor.min.js","sources":["../src/ProcessorBase.ts","../src/index.ts"],"sourcesContent":["export interface IProcessor<IReturn = any> {\n  getData(): IReturn;\n  process(): IReturn | Promise<IReturn>;\n}\n\nexport default abstract class ProcessorBase implements IProcessor {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected constructor(_params?: any) {\n    //\n  }\n  abstract getData(): any;\n  abstract process(): any;\n}\n","import ProcessorBase, { IProcessor } from \"./ProcessorBase\";\n\nexport { ProcessorBase };\n\nexport default class TypeProcessor<IReturn = any> {\n  /**\n   * 重写类型映射\n   */\n  protected processorsMapping: Record<number | string, typeof ProcessorBase> =\n    {};\n\n  /**\n   * 覆盖老的映射关系或者新增映射关系\n   */\n  protected moreProcessorsMapping: Record<\n    number | string,\n    typeof ProcessorBase\n  > = {};\n\n  private currentElement: string | number = \"\";\n\n  private updateTypeMapping() {\n    if (!this.processorsMapping) {\n      this.processorsMapping = {};\n    }\n    this.processorsMapping = {\n      ...this.processorsMapping,\n      ...this.moreProcessorsMapping,\n    };\n  }\n\n  getCurrentElement() {\n    return this.currentElement;\n  }\n\n  setCurrentElement(val: number | string) {\n    this.currentElement = val;\n  }\n\n  getActor(params?: any): IProcessor<IReturn> | undefined {\n    this.updateTypeMapping();\n    try {\n      const actor = new (this.processorsMapping[\n        this.getCurrentElement()\n      ] as any)(params);\n\n      if (!actor) {\n        return;\n      }\n\n      return actor;\n    } catch (e) {\n      console.error(e);\n      return;\n    }\n  }\n}\n"],"names":["ProcessorBase","_params","TypeProcessor","this","processorsMapping","moreProcessorsMapping","currentElement","prototype","updateTypeMapping","__assign","getCurrentElement","setCurrentElement","val","getActor","params","actor","e","console","error","exports","Object","defineProperty","value"],"mappings":";;;;;;;;;;;;;;oSAKAA,EAEE,SAAsBC,KCHxBC,EAAA,WAAA,SAAAA,IAIYC,KAAiBC,kBACzB,GAKQD,KAAqBE,sBAG3B,GAEIF,KAAcG,eAAoB,GAqC5C,OAnCUJ,EAAAK,UAAAC,kBAAR,WACOL,KAAKC,oBACRD,KAAKC,kBAAoB,IAE3BD,KAAKC,kBAAiBK,EAAAA,EAAA,GACjBN,KAAKC,mBACLD,KAAKE,wBAIZH,EAAAK,UAAAG,kBAAA,WACE,OAAOP,KAAKG,gBAGdJ,EAAiBK,UAAAI,kBAAjB,SAAkBC,GAChBT,KAAKG,eAAiBM,GAGxBV,EAAQK,UAAAM,SAAR,SAASC,GACPX,KAAKK,oBACL,IACE,IAAMO,EAAQ,IAAKZ,KAAKC,kBACtBD,KAAKO,sBACGI,GAEV,IAAKC,EACH,OAGF,OAAOA,EACP,MAAOC,GAEP,YADAC,QAAQC,MAAMF,KAInBd,KAAAiB,EAAAnB,cAAAA,EAAAmB,EAAA,QAAAjB,EAAAkB,OAAAC,eAAAF,EAAA,aAAA,CAAAG,OAAA"}