{"version":3,"file":"type-processor.es.js","sources":["../src/ProcessorBase.ts","../src/index.ts"],"sourcesContent":["export interface IProcessor<IReturn = any> {\n  getData(): IReturn;\n  process(): IReturn | Promise<IReturn>;\n}\n\nexport default abstract class ProcessorBase implements IProcessor {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected constructor(_params?: any) {\n    //\n  }\n  abstract getData(): any;\n  abstract process(): any;\n}\n","import ProcessorBase, { IProcessor } from \"./ProcessorBase\";\n\nexport { ProcessorBase };\n\nexport default class TypeProcessor {\n  /**\n   * 重写类型映射\n   */\n  protected processorsMapping: Record<number | string, typeof ProcessorBase> =\n    {};\n\n  /**\n   * 覆盖老的映射关系或者新增映射关系\n   */\n  protected moreProcessorsMapping: Record<\n    number | string,\n    typeof ProcessorBase\n  > = {};\n\n  private currentElement: string | number = \"\";\n\n  private updateTypeMapping() {\n    if (!this.processorsMapping) {\n      this.processorsMapping = {};\n    }\n    this.processorsMapping = {\n      ...this.processorsMapping,\n      ...this.moreProcessorsMapping,\n    };\n  }\n\n  getCurrentElement() {\n    return this.currentElement;\n  }\n\n  setCurrentElement(val: number | string) {\n    this.currentElement = val;\n  }\n\n  getActor<IReturnType = any>(\n    params?: any,\n  ): IProcessor<IReturnType> | undefined {\n    this.updateTypeMapping();\n    try {\n      const actor = new (this.processorsMapping[\n        this.getCurrentElement()\n      ] as any)(params);\n\n      if (!actor) {\n        return;\n      }\n\n      return actor;\n    } catch (e) {\n      console.error(e);\n      return;\n    }\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,IAAA,aAAA,kBAAA,YAAA;;AAEE,IAAA,SAAA,aAAA,CAAsB,OAAa,EAAA;;KAElC;IAGH,OAAC,aAAA,CAAA;AAAD,CAAC,EAAA;;ACRD,IAAA,aAAA,kBAAA,YAAA;AAAA,IAAA,SAAA,aAAA,GAAA;AACE;;AAEG;QACO,IAAiB,CAAA,iBAAA,GACzB,EAAE,CAAC;AAEL;;AAEG;QACO,IAAqB,CAAA,qBAAA,GAG3B,EAAE,CAAC;QAEC,IAAc,CAAA,cAAA,GAAoB,EAAE,CAAC;KAuC9C;AArCS,IAAA,aAAA,CAAA,SAAA,CAAA,iBAAiB,GAAzB,YAAA;AACE,QAAA,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;AAC3B,YAAA,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;AAC7B,SAAA;QACD,IAAI,CAAC,iBAAiB,GAAA,QAAA,CAAA,QAAA,CAAA,EAAA,EACjB,IAAI,CAAC,iBAAiB,CAAA,EACtB,IAAI,CAAC,qBAAqB,CAC9B,CAAC;KACH,CAAA;AAED,IAAA,aAAA,CAAA,SAAA,CAAA,iBAAiB,GAAjB,YAAA;QACE,OAAO,IAAI,CAAC,cAAc,CAAC;KAC5B,CAAA;IAED,aAAiB,CAAA,SAAA,CAAA,iBAAA,GAAjB,UAAkB,GAAoB,EAAA;AACpC,QAAA,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;KAC3B,CAAA;IAED,aAAQ,CAAA,SAAA,CAAA,QAAA,GAAR,UACE,MAAY,EAAA;QAEZ,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI;AACF,YAAA,IAAM,KAAK,GAAG,IAAK,IAAI,CAAC,iBAAiB,CACvC,IAAI,CAAC,iBAAiB,EAAE,CACjB,CAAC,MAAM,CAAC,CAAC;YAElB,IAAI,CAAC,KAAK,EAAE;gBACV,OAAO;AACR,aAAA;AAED,YAAA,OAAO,KAAK,CAAC;AACd,SAAA;AAAC,QAAA,OAAO,CAAC,EAAE;AACV,YAAA,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACjB,OAAO;AACR,SAAA;KACF,CAAA;IACH,OAAC,aAAA,CAAA;AAAD,CAAC,EAAA;;;;"}